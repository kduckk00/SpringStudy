# CLASS 03 어드바이스 동작 시점

   어드바이스는 각 조인포인트에 삽입되어 동작할 횡단 관심에 해당하는 공통 기능이며, 동작 시점은 각 AOP 기술마다 다르다.

| 동작시점 | 설명                                                         |
| -------- | ------------------------------------------------------------ |
| Before   | 비즈니스 메소드 실행 전 동작                                 |
| After    | - After Returning : 비즈니스 메소드가 성공적으로 리턴되면 동작<br />- After Throwing : 비즈니스 메소드 실행중 예외가 발생하면 동작(마치 try~catch) 블록에서 catch 블록에 해당<br />- After : 비즈니스 메소드가 실행된 후, 무조건 실행(try~catch~finally 블록에서 finally 블록에 해당) |
| Around   | Around는 메소드 호출 자체를 가로채 비즈니스 메소드 실행 전후에 처리할 로직을 삽입할 수 있음 |



## 3.1 Before 어드바이스

~~사진~~




## 3.2 After Returning 어드바이스

  After Returning 어드바이스는 포인트컷으로 지정된 메소드가 정상적으로 실행되고 나서, 메소드 수행 결과로 생성된 데이터를 리턴하는 시점에 동작한다. 따라서 비즈니스 메소드 수행 결과로 얻은 결과 데이터를 이용하여 사후 처리 로직을 추가할 때 사용한다.

~~사진~~



## 3.3 After Throwing 어드바이스

  After Throwing 어드바이스는 포인트컷으로 지정한 메소드가 실행되다가 예외가 발생하는 시점에 동작한다. 따라서 예외 처리 어드바이스를 설정할 때 사용한다.

~~사진~~

  After Throwing 어드바이스를 테스트 하기 위해 예외 처리 기능의 어드바이스 클래스를 구현한다. After Throwing 어드바이스는 < aop:after-thrwing > 엘리먼트를 이용하여 설정한다. After Throwing 어드바이스는 비즈니스 메소드에서 예외가 발생할 때 동작하므로 예외가 발생하지 않은 현재 상황에서는 동작 여부를 확인할 수 없다. 따라서 **BoardServiceImpl** 클래스에 예외가 발생하는 코드를 추가한다.~~

~~결과에 대한 캡쳐~~



## 3.4 After 어드바이스

  try-catch-finally 구문에서 finally 블록처럼 예외 발생여부에 상관없이 무조건 수행되는 어드바이스를 등록할 때 After 어드바이스를 사용한다.

~~사진~~

  예외가 발생한 상황에서도 < aop:after >로 설정한 finallyLog() 메소드가 먼저 실행되고, exceptionLog() 메소드가 실행되는 것을 확인할 수 있다.~~

~~결과에 대한 캡쳐~~



## 3.5 Around 어드파이스

  Around 어드바이스는 클라이언트의 메소드 호출을 가로챈다. 그래서 클라이언트가 호출한 비즈니스 메소드가 실행되기 전에 사전 처리 로직을 수행할 수 있으며, 비즈니스 메소드가 모두 실행되고 나서 사후 처리 로직을 수행할 수 있다.

~~사진~~

~~결과에 대한 캡쳐~~

pjp.proceed()메소드 호출 앞에 작성된 코드는 Before 어드바이스와 동일하게 작동하며, pjp.proceed() 메소드 호출 뒤에 작성된 코드는 After 어드바이스와 동일하게 동작한다.